name: A workflow for build
on: workflow_dispatch

jobs:
  build:
    name: Build
    runs-on: windows-latest
    steps:
      - name: Set current branch
        id: set-current-branch
        run: |
             Get-Date -Format o
             $branchName = "${{github.ref}}".Split("/")["${{github.ref}}".Split("/").Length -1]
             echo "::set-output name=CURRENT_BRANCH::$(echo $branchName)"
             echo "Running on $branchName "
             #Linux version: echo "##[set-output name=CURRENT_BRANCH;]$(echo ${GITHUB_REF#refs/heads/})"
             Get-Date -Format o
      - name: Get current branch
        run: |
             Get-Date -Format o
             echo "Current branch is ${{ steps.set-current-branch.outputs.CURRENT_BRANCH }} "
             Get-Date -Format o
      - name: Build
        run: |
             Get-Date -Format o
             echo "Executing build"
             Get-Date -Format o
      - name: Upload artifact
        run: |
             Get-Date -Format o
             echo "Upload artifact"
             Get-Date -Format o
